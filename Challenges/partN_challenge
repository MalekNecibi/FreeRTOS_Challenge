#if CONFIG_FREERTOS_UNICORE
static const BaseType_t app_cpu = 0;
#else
static const BaseType_t app_cpu = 1;
#endif

static const int led_pin = LED_BUILTIN;

void task(void* parameter);

void setup() {
    pinMode(led_pin, OUTPUT);
    digitalWrite(led_pin, HIGH);

    Serial.begin(115200);
    vTaskDelay(500 / portTICK_PERIOD_MS);    // Serial initialization needs time
    
    // Start Task
    xTaskCreatePinnedToCore(
        task,
        "Task A",
        256 + configMINIMAL_STACK_SIZE,
        NULL,
        1,
        NULL,
        app_cpu
    );

    
    // vTaskStartScheduler();   // needed on Vanilla FreeRTOS
    vTaskDelete(NULL);
}

void loop() {}

void task(void* parameter) {
    // if (NULL == parameter) {
        // return;
    // }
    void* pVariable = (void*)parameter;
    
    while(1) {
        taskYIELD();
    }
}
